{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\SkillMaster_CloudProject\\\\skillmaster\\\\src\\\\Components\\\\creator.js\";\nimport React, { Component } from 'react';\nimport { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport Footer from \"../Components/footer\";\nimport { useState, useEffect } from 'react';\nimport '../Components/question.css';\nimport '../Components/creatorcss.css';\nimport { UserContext } from \"../providers/UserProvider\";\nimport firebase from \"firebase/app\";\nimport { auth } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nrequire('firebase/auth');\n\nrequire('firebase/database');\n\nrequire('firebase/storage');\n\nconst storage = firebase.storage();\nconst timeStamp = Date.now();\n\nclass Creator extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleQuestionChange = event => {\n      this.setState({\n        question: event.target.value\n      });\n    };\n\n    this.handleQuestionImageChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        }));\n      }\n    };\n\n    this.handleQuestionImageUpload = () => {\n      const {\n        image\n      } = this.state;\n      const uploadTask = storage.ref(`/images/${timeStamp}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // progress function ...\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        this.setState({\n          progress\n        });\n      }, error => {\n        // Error function ...\n        console.log(error);\n      }, () => {\n        // complete function ...\n        uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n          console.log('File available at', downloadURL);\n          this.setState({\n            url: downloadURL\n          });\n        });\n      });\n    };\n\n    this.handleSubmit = event => {\n      let quiz = \"\";\n      quiz = this.state.quiz;\n      let question = \"\";\n      question = this.state.question;\n      let url = \"\";\n      url = this.state.url;\n      event.preventDefault();\n      auth.onAuthStateChanged(userAuth => {\n        let refer = firebase.database().ref('/users/' + userAuth.uid + '/public/' + this.state.quiz + '/');\n\n        if (!this.state.public) {\n          refer = firebase.database().ref('/users/' + userAuth.uid + '/private/' + this.state.quiz + '/');\n        }\n\n        refer.once(\"value\").then(function (snapshot) {\n          console.log(snapshot.numChildren());\n          refer.child('question' + (snapshot.numChildren() + 1)).update({\n            quiz: quiz,\n            question: question,\n            questionImageURL: url,\n            by: userAuth.displayName,\n            contactMail: userAuth.email,\n            timeStamp: timeStamp\n          }).then(error => {\n            this.setState({\n              uploaded: true\n            });\n            console.log(error);\n          });\n        });\n      });\n    };\n\n    this.handleQuizChange = event => {\n      let vs = \"\";\n      vs = event.target.value;\n      vs = vs.trim();\n      vs = vs.replace(/[^a-zA-Z ]/g, \"\");\n      this.setState({\n        quiz: vs\n      });\n    };\n\n    this.handlePublicAssignment = event => {\n      if (this.state.public) {\n        this.setState({\n          public: false\n        });\n      } else {\n        this.setState({\n          public: true\n        });\n      }\n    };\n\n    this.state = {\n      quiz: '',\n      question: '',\n      image: null,\n      url: \"\",\n      progress: 0,\n      uploaded: false,\n      public: true\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \" mx-4 mt-5 pt-5 \",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"whitefont\",\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"EnterAssignmentName [Case Sensitive] ::\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: this.state.quiz,\n            onChange: this.handleQuizChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"EnterQuestion ::\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: this.state.question,\n            onChange: this.handleQuestionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            defaultChecked: this.state.public,\n            onChange: this.handlePublicAssignment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Make this as Public\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            class: \"btn effect01 \",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: this.state.uploaded\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"progress\", {\n              value: this.state.progress,\n              max: \"100\",\n              className: \"progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-field input-field\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                onChange: this.handleQuestionImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.handleQuestionImageUpload,\n            className: \"btn effect01\",\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: this.state.url || \"https://via.placeholder.com/400x300\",\n            alt: \"Uploaded Images\",\n            height: \"300\",\n            width: \"400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }, this), th, \" \", /*#__PURE__*/_jsxDEV(\"section\", {\n        class: \"details-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"details-modal-title\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"My details modal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"details-modal-content\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You can click the X in the corner or click the overlay to close this modal. Something like this could be useful as a nice way to show additional information, but that's about as far as I would take it. It's just a nice way of styling the details element.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nCreator.contextType = UserContext;\nexport default Creator;","map":{"version":3,"sources":["C:/Users/USER/SkillMaster_CloudProject/skillmaster/src/Components/creator.js"],"names":["React","Component","useContext","Redirect","Link","Footer","useState","useEffect","UserContext","firebase","auth","require","storage","timeStamp","Date","now","Creator","constructor","props","handleQuestionChange","event","setState","question","target","value","handleQuestionImageChange","e","files","image","handleQuestionImageUpload","state","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","getDownloadURL","then","downloadURL","url","handleSubmit","quiz","preventDefault","onAuthStateChanged","userAuth","refer","database","uid","public","once","numChildren","child","update","questionImageURL","by","displayName","contactMail","email","uploaded","handleQuizChange","vs","trim","replace","handlePublicAssignment","render","th","contextType"],"mappings":";AAIA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAAUC,QAAV,EAAoBC,SAApB,QAAqC,OAArC;AACA,OAAO,4BAAP;AACA,OAAO,8BAAP;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,SAASC,IAAT,QAAqB,aAArB;;;;AACAC,OAAO,CAAC,eAAD,CAAP;;AACAA,OAAO,CAAC,mBAAD,CAAP;;AACAA,OAAO,CAAC,kBAAD,CAAP;;AAEA,MAAMC,OAAO,GAAGH,QAAQ,CAACG,OAAT,EAAhB;AAEA,MAAMC,SAAS,GAAEC,IAAI,CAACC,GAAL,EAAjB;;AACA,MAAMC,OAAN,SAAsBf,SAAtB,CAA+B;AAI3BgB,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAalBC,oBAbkB,GAaIC,KAAD,IAAS;AAC1B,WAAKC,QAAL,CAAc;AACVC,QAAAA,QAAQ,EAACF,KAAK,CAACG,MAAN,CAAaC;AADZ,OAAd;AAIH,KAlBiB;;AAAA,SAmBlBC,yBAnBkB,GAmBUC,CAAC,IAAI;AAC7B,UAAIA,CAAC,CAACH,MAAF,CAASI,KAAT,CAAe,CAAf,CAAJ,EAAuB;AACrB,cAAMC,KAAK,GAAGF,CAAC,CAACH,MAAF,CAASI,KAAT,CAAe,CAAf,CAAd;AACA,aAAKN,QAAL,CAAc,OAAO;AAAEO,UAAAA;AAAF,SAAP,CAAd;AACD;AACF,KAxBe;;AAAA,SA0BhBC,yBA1BgB,GA0BY,MAAM;AAChC,YAAM;AAAED,QAAAA;AAAF,UAAY,KAAKE,KAAvB;AACA,YAAMC,UAAU,GAAGnB,OAAO,CAACoB,GAAR,CAAa,WAAUnB,SAAU,EAAjC,EAAoCoB,GAApC,CAAwCL,KAAxC,CAAnB;AACAG,MAAAA,UAAU,CAACG,EAAX,CACE,eADF,EAEEC,QAAQ,IAAI;AACV;AACA,cAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CACdH,QAAQ,CAACI,gBAAT,GAA4BJ,QAAQ,CAACK,UAAtC,GAAoD,GADrC,CAAjB;AAGA,aAAKnB,QAAL,CAAc;AAAEe,UAAAA;AAAF,SAAd;AACD,OARH,EASEK,KAAK,IAAI;AACP;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OAZH,EAaE,MAAM;AACJ;AACAV,QAAAA,UAAU,CAACI,QAAX,CAAoBH,GAApB,CAAwBY,cAAxB,GAAyCC,IAAzC,CAA+CC,WAAD,IAAiB;AAC7DJ,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCG,WAAjC;AACA,eAAKzB,QAAL,CAAc;AAAE0B,YAAAA,GAAG,EAACD;AAAN,WAAd;AACD,SAHD;AAID,OAnBH;AAqBD,KAlDe;;AAAA,SAmDhBE,YAnDgB,GAmDF5B,KAAD,IAAS;AACpB,UAAI6B,IAAI,GAAE,EAAV;AACAA,MAAAA,IAAI,GAAE,KAAKnB,KAAL,CAAWmB,IAAjB;AACA,UAAI3B,QAAQ,GAAE,EAAd;AACAA,MAAAA,QAAQ,GAAE,KAAKQ,KAAL,CAAWR,QAArB;AACA,UAAIyB,GAAG,GAAE,EAAT;AACAA,MAAAA,GAAG,GAAE,KAAKjB,KAAL,CAAWiB,GAAhB;AAEA3B,MAAAA,KAAK,CAAC8B,cAAN;AACAxC,MAAAA,IAAI,CAACyC,kBAAL,CAAwBC,QAAQ,IAAI;AAElC,YAAIC,KAAK,GAAC5C,QAAQ,CAAC6C,QAAT,GAAoBtB,GAApB,CAAwB,YAAUoB,QAAQ,CAACG,GAAnB,GAAuB,UAAvB,GAAkC,KAAKzB,KAAL,CAAWmB,IAA7C,GAAkD,GAA1E,CAAV;;AACF,YAAG,CAAC,KAAKnB,KAAL,CAAW0B,MAAf,EAAsB;AACpBH,UAAAA,KAAK,GAAC5C,QAAQ,CAAC6C,QAAT,GAAoBtB,GAApB,CAAwB,YAAUoB,QAAQ,CAACG,GAAnB,GAAuB,WAAvB,GAAmC,KAAKzB,KAAL,CAAWmB,IAA9C,GAAmD,GAA3E,CAAN;AACD;;AACDI,QAAAA,KAAK,CAACI,IAAN,CAAW,OAAX,EACCZ,IADD,CACM,UAASV,QAAT,EAAmB;AACxBO,UAAAA,OAAO,CAACC,GAAR,CAAYR,QAAQ,CAACuB,WAAT,EAAZ;AACAL,UAAAA,KAAK,CAACM,KAAN,CAAY,cAAYxB,QAAQ,CAACuB,WAAT,KAAuB,CAAnC,CAAZ,EAAmDE,MAAnD,CAA0D;AACzDX,YAAAA,IAAI,EAACA,IADoD;AAEzD3B,YAAAA,QAAQ,EAAGA,QAF8C;AAGzDuC,YAAAA,gBAAgB,EAAGd,GAHsC;AAIzDe,YAAAA,EAAE,EAAGV,QAAQ,CAACW,WAJ2C;AAKzDC,YAAAA,WAAW,EAAEZ,QAAQ,CAACa,KALmC;AAMzDpD,YAAAA,SAAS,EAAEA;AAN8C,WAA1D,EAOIgC,IAPJ,CAOWJ,KAAD,IAAS;AACV,iBAAKpB,QAAL,CAAc;AAAC6C,cAAAA,QAAQ,EAAE;AAAX,aAAd;AACAxB,YAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACP,WAVF;AAWE,SAdH;AAgBC,OAtBD;AAuBD,KAnFe;;AAAA,SAoFhB0B,gBApFgB,GAoFE/C,KAAD,IAAS;AACxB,UAAIgD,EAAE,GAAC,EAAP;AACAA,MAAAA,EAAE,GAAChD,KAAK,CAACG,MAAN,CAAaC,KAAhB;AACA4C,MAAAA,EAAE,GAACA,EAAE,CAACC,IAAH,EAAH;AACAD,MAAAA,EAAE,GAACA,EAAE,CAACE,OAAH,CAAW,aAAX,EAA0B,EAA1B,CAAH;AACA,WAAKjD,QAAL,CAAc;AACZ4B,QAAAA,IAAI,EAACmB;AADO,OAAd;AAGD,KA5Fe;;AAAA,SA8FhBG,sBA9FgB,GA8FQnD,KAAD,IAAS;AAC9B,UAAG,KAAKU,KAAL,CAAW0B,MAAd,EAAqB;AACnB,aAAKnC,QAAL,CAAc;AACZmC,UAAAA,MAAM,EAAC;AADK,SAAd;AAGD,OAJD,MAIK;AACH,aAAKnC,QAAL,CAAc;AACZmC,UAAAA,MAAM,EAAC;AADK,SAAd;AAGD;AACF,KAxGe;;AAEd,SAAK1B,KAAL,GAAW;AACPmB,MAAAA,IAAI,EAAC,EADE;AAEP3B,MAAAA,QAAQ,EAAC,EAFF;AAGPM,MAAAA,KAAK,EAAC,IAHC;AAIPmB,MAAAA,GAAG,EAAE,EAJE;AAKPX,MAAAA,QAAQ,EAAE,CALH;AAMP8B,MAAAA,QAAQ,EAAC,KANF;AAOPV,MAAAA,MAAM,EAAC;AAPA,KAAX;AASH;;AA+FDgB,EAAAA,MAAM,GAAE;AACJ,wBACI;AAAA,8BACA;AAAS,QAAA,SAAS,EAAE,kBAApB;AAAA,+BACI;AAAM,UAAA,SAAS,EAAC,WAAhB;AAA4B,UAAA,QAAQ,EAAE,KAAKxB,YAA3C;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAO,YAAA,KAAK,EAAE,KAAKlB,KAAL,CAAWmB,IAAzB;AAA+B,YAAA,QAAQ,EAAE,KAAKkB;AAA9C;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAU,YAAA,KAAK,EAAE,KAAKrC,KAAL,CAAWR,QAA5B;AAAsC,YAAA,QAAQ,EAAE,KAAKH;AAArD;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAMI;AAAO,YAAA,IAAI,EAAC,UAAZ;AAAuB,YAAA,cAAc,EAAE,KAAKW,KAAL,CAAW0B,MAAlD;AAA0D,YAAA,QAAQ,EAAE,KAAKe;AAAzE;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAQI;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,KAAK,EAAC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARJ,eASQ,QAAC,IAAD;AAAM,YAAA,EAAE,EAAE,KAAKzC,KAAL,CAAWoC;AAArB;AAAA;AAAA;AAAA;AAAA,kBATR;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADA,eAiBA;AAAA,+BAEN;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,kCAEE;AAAK,YAAA,SAAS,EAAC,KAAf;AAAA,mCACE;AAAU,cAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWM,QAA5B;AAAsC,cAAA,GAAG,EAAC,KAA1C;AAAgD,cAAA,SAAS,EAAC;AAA1D;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFF,eAKE;AAAK,YAAA,SAAS,EAAC,wBAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,QAAQ,EAAE,KAAKX;AAAlC;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBALF,eAYE;AACE,YAAA,OAAO,EAAE,KAAKI,yBADhB;AAEE,YAAA,SAAS,EAAC,cAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF,eAkBE;AAAA;AAAA;AAAA;AAAA,kBAlBF,eAmBE;AAAA;AAAA;AAAA;AAAA,kBAnBF,eAoBE;AACE,YAAA,GAAG,EAAE,KAAKC,KAAL,CAAWiB,GAAX,IAAkB,qCADzB;AAEE,YAAA,GAAG,EAAC,iBAFN;AAGE,YAAA,MAAM,EAAC,KAHT;AAIE,YAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,kBApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFM;AAAA;AAAA;AAAA;AAAA,cAjBA,EAiDC0B,EAjDD,oBAiDK;AAAS,QAAA,KAAK,EAAC,eAAf;AAAA,gCACb;AAAK,UAAA,KAAK,EAAC,qBAAX;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADa,eAIb;AAAK,UAAA,KAAK,EAAC,uBAAX;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAJa;AAAA;AAAA;AAAA;AAAA;AAAA,cAjDL;AAAA,oBADJ;AAiEH;;AAhL0B;;AAAzBzD,O,CAGK0D,W,GAAclE,W;AAiLzB,eAAeQ,OAAf","sourcesContent":["\r\n\r\n\r\n\r\nimport React,{Component} from 'react'\r\nimport { useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport Footer from \"../Components/footer\"\r\nimport  { useState, useEffect } from 'react';\r\nimport '../Components/question.css'\r\nimport '../Components/creatorcss.css'\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport firebase from \"firebase/app\";\r\nimport { auth } from \"../firebase\"\r\nrequire('firebase/auth');\r\nrequire('firebase/database');\r\nrequire('firebase/storage');\r\n\r\nconst storage = firebase.storage();\r\n\r\nconst timeStamp =Date.now()\r\nclass Creator extends Component{\r\n\r\n\r\n    static contextType = UserContext;\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            quiz:'',\r\n            question:'',\r\n            image:null,\r\n            url: \"\",\r\n            progress: 0,\r\n            uploaded:false,\r\n            public:true\r\n        }\r\n    }\r\n\r\n    handleQuestionChange=(event)=>{\r\n        this.setState({\r\n            question:event.target.value\r\n        });\r\n\r\n    }\r\n    handleQuestionImageChange = e => {\r\n        if (e.target.files[0]) {\r\n          const image = e.target.files[0];\r\n          this.setState(() => ({ image }));\r\n        }\r\n      };\r\n\r\n      handleQuestionImageUpload = () => {\r\n        const { image } = this.state;\r\n        const uploadTask = storage.ref(`/images/${timeStamp}`).put(image);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          snapshot => {\r\n            // progress function ...\r\n            const progress = Math.round(\r\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n            );\r\n            this.setState({ progress });\r\n          },\r\n          error => {\r\n            // Error function ...\r\n            console.log(error);\r\n          },\r\n          () => {\r\n            // complete function ...\r\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n              console.log('File available at', downloadURL);\r\n              this.setState({ url:downloadURL });\r\n            });\r\n          }\r\n        );\r\n      };\r\n      handleSubmit=(event)=>{\r\n        let quiz =\"\"\r\n        quiz =this.state.quiz\r\n        let question =\"\"\r\n        question =this.state.question\r\n        let url =\"\"\r\n        url =this.state.url\r\n        \r\n        event.preventDefault();\r\n        auth.onAuthStateChanged(userAuth => {\r\n          \r\n          let refer=firebase.database().ref('/users/'+userAuth.uid+'/public/'+this.state.quiz+'/')\r\n        if(!this.state.public){\r\n          refer=firebase.database().ref('/users/'+userAuth.uid+'/private/'+this.state.quiz+'/')\r\n        }\r\n        refer.once(\"value\")\r\n        .then(function(snapshot) {\r\n         console.log(snapshot.numChildren()); \r\n         refer.child('question'+(snapshot.numChildren()+1)).update({\r\n          quiz:quiz,\r\n          question : question,\r\n          questionImageURL : url,\r\n          by : userAuth.displayName,\r\n          contactMail :userAuth.email,\r\n          timeStamp :timeStamp\r\n          }).then ((error)=>{\r\n                  this.setState({uploaded :true});\r\n                  console.log(error)\r\n          })\r\n          });\r\n         \r\n        });        \r\n      }\r\n      handleQuizChange=(event)=>{\r\n        let vs=\"\"\r\n        vs=event.target.value\r\n        vs=vs.trim();\r\n        vs=vs.replace(/[^a-zA-Z ]/g, \"\")\r\n        this.setState({\r\n          quiz:vs\r\n      });\r\n      }\r\n      \r\n      handlePublicAssignment=(event)=>{\r\n        if(this.state.public){\r\n          this.setState({\r\n            public:false\r\n        });\r\n        }else{\r\n          this.setState({\r\n            public:true\r\n        });\r\n        }\r\n      }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            <section className= \" mx-4 mt-5 pt-5 \">\r\n                <form className=\"whitefont\" onSubmit={this.handleSubmit}>\r\n                    <div>EnterAssignmentName [Case Sensitive] ::</div>\r\n                    <input value={this.state.quiz} onChange={this.handleQuizChange}/>\r\n                    <div>EnterQuestion ::</div>\r\n                    <textarea value={this.state.question} onChange={this.handleQuestionChange}/>\r\n                \r\n                    <input type=\"checkbox\" defaultChecked={this.state.public} onChange={this.handlePublicAssignment} />\r\n                    <label>Make this as Public</label>\r\n                    <button type=\"submit\" class=\"btn effect01 \">Send</button>\r\n                        <Link to={this.state.uploaded}></Link>\r\n                </form>\r\n            </section>\r\n\r\n\r\n\r\n            <section>\r\n                \r\n      <div className=\"center\">\r\n          \r\n        <div className=\"row\">\r\n          <progress value={this.state.progress} max=\"100\" className=\"progress\" />\r\n        </div>\r\n        <div className=\"file-field input-field\">\r\n          <div className=\"btn\">\r\n            <span>File</span>\r\n            <input type=\"file\" onChange={this.handleQuestionImageChange} />\r\n          </div>\r\n          \r\n        </div>\r\n        <button\r\n          onClick={this.handleQuestionImageUpload}\r\n          className=\"btn effect01\"\r\n        >\r\n          Upload\r\n        </button>\r\n        <br />\r\n        <br />\r\n        <img\r\n          src={this.state.url || \"https://via.placeholder.com/400x300\"}\r\n          alt=\"Uploaded Images\"\r\n          height=\"300\"\r\n          width=\"400\"\r\n        />\r\n      </div>\r\n            </section>\r\n\r\n\r\n            {th} <section class=\"details-modal\"  >                 \r\n    <div class=\"details-modal-title\">\r\n      <h1>My details modal</h1>\r\n    </div>\r\n    <div class=\"details-modal-content\">\r\n      <p>\r\n        You can click the X in the corner or click the overlay to close this modal.\r\n        Something like this could be useful as a nice way to show additional information,\r\n        but that's about as far as I would take it. It's just a nice way of styling the details element.\r\n      </p>\r\n    </div>\r\n    \r\n                          </section>\r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n}\r\nexport default Creator"]},"metadata":{},"sourceType":"module"}